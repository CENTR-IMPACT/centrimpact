% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analyze_alignment.R
\name{analyze_alignment}
\alias{analyze_alignment}
\title{Calculate Alignment Between Researchers and Partners}
\usage{
analyze_alignment(alignment_df)
}
\arguments{
\item{alignment_df}{A data frame containing the following columns:
\describe{
\item{role}{Character vector indicating 'researcher' or 'partner'}
\item{alignment}{Character vector of alignment categories}
\item{rating}{Numeric vector of ratings (typically on a Likert scale)}
\item{color}{Character vector of hex color codes for each alignment category (optional)}
}}
}
\value{
A list with the following components:
\describe{
\item{alignment_medians}{Data frame containing median ratings by alignment category and role}
\item{icc_score}{ICC object from \code{irr::icc()} with inter-rater reliability statistics}
\item{alignment_score}{Formatted ICC value as a character string}
}
}
\description{
This function calculates and visualizes the alignment between researcher and partner ratings
across different alignment categories. It computes median ratings, inter-rater agreement (ICC),
and prepares data for visualization. The function implements a two-way random effects model
to assess absolute agreement between raters.
}
\details{
The function performs the following key operations:
\enumerate{
\item Validates input data structure and values
\item Calculates interpolated medians for each alignment category by role
\item Computes geometric means of researcher and partner medians for overall scores
\item Calculates intraclass correlation coefficient (ICC) to quantify inter-rater agreement
\item Returns structured results for further analysis and visualization
}
}
\section{Note}{

The ICC is calculated using a two-way random effects model for absolute agreement (single rater).
The function uses interpolation to handle tied values when calculating medians.
}

\examples{
# Create example data with realistic alignment categories
set.seed(123)
alignment_data <- data.frame(
  role = rep(c("researcher", "partner"), each = 20),
  alignment = rep(c(
    "Research_Questions", "Methodology", "Timeline",
    "Data_Needs", "Impact_Goals"
  ), 8),
  rating = sample(1:5, 40, replace = TRUE, prob = c(0.1, 0.2, 0.4, 0.2, 0.1)),
  color = rep(c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2"), 8)
)

# Run analysis
results <- analyze_alignment(alignment_data)

# View alignment score (ICC)
cat("Inter-rater agreement (ICC):", results$alignment_score, "\n")

# View median ratings by role and alignment
print(results$alignment_medians)
}
\references{
McGraw, K. O., & Wong, S. P. (1996). Forming inferences about some intraclass
correlation coefficients. Psychological Methods, 1(1), 30-46.
}
